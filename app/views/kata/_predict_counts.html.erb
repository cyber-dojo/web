<div id="predict-counts">
  <div class="tick box">
    <div class="tick count">0</div>
    <img src="/images/traffic-light/circle-tick.png">
  </div>
  <div class="circle box">
    <div class="cross count">0</div>
    <img src="/images/traffic-light/circle-cross.png">
  </div>
  <div class="revert box">
    <div class="revert count">0</div>
    <img src="/images/traffic-light/circle-revert.png">
  </div>
</div>

<script>
'use strict';
const $predictCounts = $('#predict-counts');
cd.kata.showPredictCounts = () => $predictCounts.show('slow');
cd.kata.hidePredictCounts = () => $predictCounts.hide('slow');

$(() => {

  cd.kata.updatePredictCounts = (light) => {    
    if (cd.lib.isPredict(light)) {
      $('.count', $predictCounts).removeClass('red amber green');
      const isRight = (light.colour === light.predicted);
      updatePredictCount(isRight ? 'tick' : 'cross', light.predicted);
    }
    if (light.revert) {
      updatePredictCount('revert', light.colour);
    }
  };

  // - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  const updatePredictCount = (name, colour) => {
    $(`.${name}.count`, $predictCounts)
      .text(counts[name] += 1)
      .addClass(colour);
  };

  // - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  const counts = {
    tick: 0,
    cross: 0,
    revert: 0
  };

});
</script>
