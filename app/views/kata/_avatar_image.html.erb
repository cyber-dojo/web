
<% if @avatar_name != '' %>
  <img src="/avatar/image/<%= @avatar_index %>"
       alt="<%= @avatar_name %>"
       class="avatar-image"
       id="edit-avatar-image"/>
<% end %>

<script type="text/javascript">
'use strict';
$(() => {

  if ("<%= @avatar_name %>".length != 0) {
    // CSS maxWidth for traffic-lights is for individual exercise
    // so when in a group-exercise, reduce by width of avatar-image.
    const maxWidth = $('#traffic-lights').css('maxWidth');         // eg 730px
    const imageWidth = $('#edit-avatar-image').width();            // eg 29px
    const newMaxWidth = parseInt(maxWidth) - parseInt(imageWidth); // eg 701
    $('#traffic-lights').css('maxWidth', `${newMaxWidth}px`);
  }

});
</script>
