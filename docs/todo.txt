
app/controllers/application_controller.rb container render 404, 500
In web, improve dialog-box errors, eg when you get a server 500
 this needs to be logged so it is visible in a docker-logs command.

Polyfill old checkouts on saver model?
  having index=0 -> colour="create" would be handy.

In revert_test.rb instead of 
  @files[filename] = 'Hello'
if you write
  @files[filename] = {'content' => 'Hello'}
then it seems to cause saver to silently drop its incoming call.
There needs to be some pydantic-like checking of the parameters.

Any app-controller tests use RunnerService when they could use RunnerStub?

Are app-controller tests still using v0/v1 manifests?
  Use v2 in all tests.
  Create multi-version-tests?

------------------------------------------------------------------

- could the inter-test-events store the number of lines added/deleted 
  in the events.json summary? This would enable fast calculation of 
  RAG<->RAG stats, eg on a dashboard.
  $ git diff --help
  says it can show diffs between a commit and a worktree.
  --shortstat option gives 
  1 file changed, 3 insertions(+), 2 deletions(-)

- In avatar-navigator, when [<] [>] is selected, JS code currently
  hard-wires the index to ? (1 : avatar.events.length - 1);
  This needs to use traffc-light functions.

- stdout/stderr/status appear below the file knave when reviewing 
  an inter-test-event index. They should not.

- Selection of highlight filename when file-events are enabled needs reworking.
  When diff[x] is off:
    create -> created-filename: The file is not selected
    delete -> deleted-filename: The file is not selected
    rename -> renamed-filename: The file is not selected. No tooltip for the old filename
    edit   ->  edited-filename: The file is not selected.
  Should diff[x] be fixed to on when in details[x] is on?

- In review mode, when details[x] is checked and you are on an 
  inter-test-event (eg 6) and you turn OFF details[x] then you need to edit the index 
  going to the previous?/next? RAG to ensure a traffic-light gets an underbar
  One idea here is to switch to a "dotted index view"?
  Eg 6 -> ite(7,8,9) -> 10 
  currently, each index is shown, 7,8,9,10, etc.
  But the view could be 6, 6.1(7), 6.2(8), 6.3(9), 7(10)
  With this, switching off details[x] when on 6.2(8) would go back to "plain" 6
  This would be seen in the tool-tips too.
  This would also need to be implemented on the dashboard.

- From demo, if you add a new traffic-lights by hitting [test] 
  these get the correct RAG and diff tool-tip. But if you click it
  then in review mode, when you select one of these new RAGs, 
  with diff[x] on, then you get no diff in the files. You should. 

- Refactor JS so refresh methods are called only when needed.

- Fix layout/CSS for review-mode from dashboard

------------------------------------------------------------------

checkout is prevented if it undoes an auto-revert.
Suppose RAG -> RAG was 6->7->8 where 8 is same as 6
then you are prevented from checking out 7.
Suppose RAG -> RAG is now 6 -> ite(7,8,9) -> 10 -> 11 where 11 is same as 6.
Are you now prevented from checking out 7,8,9,10 ?
Or should this restriction be turned off completely?

------------------------------------------------------------------

- pre-release
- switch web to call saver.ran_tests() instead of saver.ran_tests2()      
- comment out JS calls to file-create/delete/rename/edit 
- do careful check that everything still works: 
    [test]-review, [dashboard]-review, revert, checkout, predict, etc
- check for stability, continue testing/checking

- release
  - use saver.ran_tests2()
  - turn on file-create/delete/rename/edit
  - check index numbering in details mode

- post-release
  o) reimplement saver.ran_test() to be the same as saver.ran_tests2()
  o) switch web to call saver.ran_tests()
  o) delete saver.ran_tests2()
