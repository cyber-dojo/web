
Upgrade demo to bring up a v2 kata

------------------------------------------------------------------

Check behaviour when saver is offline.

------------------------------------------------------------------

See if removing error-route from app/config/routes.rb 
improves dialog-box errors, eg when you get a server 500

------------------------------------------------------------------

In a v2 kata, if you create inter-test-events, and traffic-lights are at
indexes 2,4,7 then these indexes are visible in the diff-tool-tip.
If you click light(index=4) then in review mode you see that light 
underbarred and the index shown is 4.
You can use [<][>] to navigate to a non-test-event then the index 
will update, and the underbar will be removed.
Perhaps this is almost enough?
Could extra[x] only control what the underlying events are?

------------------------------------------------------------------

The extra[x] checkbox in review mode should go next to the 
<< < 8 > >> navigator.

------------------------------------------------------------------

run-tests works for v2 katas, but is currently broken for the demo 
kata of 5U2J18 because it is a v1 kata. I'm guessing this is because
in v1, saver.ran_tests() does not return the new-index. Fix this.
Simplest might be to return an index from v0,v1 in saver.

------------------------------------------------------------------

Controller-tests currently use v1 kata. 
Some tests failed because of this.
Switched to default v2 in create_language_kata()

In app_controller_test_base.rb we have this:

  def post_run_tests(options = {})
    post '/kata/run_tests', params:run_test_params(options)
    @index += 1
    assert_response :success, response.body
  end

Need to upgrade the tests so they use a v2 kata

------------------------------------------------------------------

1 controller-test fails

  1) Failure:
CheckoutTest#test_'7de177',
 in group kata, checkout a different avatar's traffic-light
 [checkout_test.rb:68]:
 ====> "message": "Out of order event"
 I think this is because of moving to v2...

------------------------------------------------------------------

In review-mode, always do diff-summary of index-1,index
and always show file-type markers. Make the diff[x] checkbox
control whether the [+][-] diffs are visible. Need to try this.
What about [+] created files and [-] deleted files?

Polyfill old checkouts on model?
