
Note: app/controllers/application_controller.rb container render 404, 500
Need to improve dialog-box errors, eg when you get a server 500

Any remaining app-controller tests use RunnerService when they could use RunnerStub?

------------------------------------------------------------------

- do I really need refresh2() with wasIndex,nowIndex? from test page I will see only RAGs.
  might be cleaner if review always calculates wasIndex (the diff delta)?
  so only nowIndex is passed?
  But if dashboard, at some point, gets inter-test-events, then it would be nice if
  clicking an inter-test-event on the dashboard opened that specific event in kata/review.  
  That means you need to pass wasIndex AND nowIndex.
  Concrete use-case:
    dashboard has ITE enabled 4,8 are RAGs
      see [4 (5,6,7) 8]   you click on 8 - review page shows 7-8
    dashboard has ITE disabled, 4,8 are RAGs
      see [4, 8]          you click on 8 - review page shows 4-8

  Plan:
    - for review.isIndependent() take (wasIndex,nowIndex)
    - keep all events in an array 
    - if (-1,-1) we want to look at latest RAG (avatar was clicked on dashboard)
        - diff[x] is unchecked
        - extras[x] is unchecked
      if nowIndex != -1, we want to look at (wasIndex,nowIndex) 
        - diff[x] is checked iff (wasIndex != nowIndex)
        - extras[x] is checked iff events[wasIndex] is an ITE OR events[nowIndex] is an ITE
      no need to store wasIndex
      From this point on, wasIndex does not need to be stored, and can be calculated
      (and will need to be calculated as you << < [navigate] > >>)

      Now review.fromTestPage currently only passes nowIndex but could pass wasIndex too.
      Same processing, wasIndex is used to determine initial state of 
      diffs[x] and extras[x] checkboxes, but wasIndex is not stored.

    
- where is review.refresh() called?
     _diff_checkbox.html.erb
     _traffic_lights.html.erb
     _review.html.erb (review.fromTestPage L115) (review.isIndependent() L126)
     _traffic_light_navigator.html.erb : lots of explicit +1/-1 literals here...
       key functionality required == being able to find event in events array by index
       which should be just [indexer] and then calculating what the +- delta is for 
       the << < [ ] > >> navigator
      

- extra[x] checkbox visible only if there actually are inter-test-events
- extra[x] selected => changes lib.isVisible so appendTrafficLights() gets inter-test-events too 
  and unselected loses them
- when you click on a RAG and previous RAG is -4 (say), the diff is correctly shown

- check how revert handles logic to know if reverting to specific 
  traffic-lights is allowed or not.
- comment out JS calls to file-create/delete/rename/edit 
  and do careful check that everything still works: revert,checkout,predict,etc
  and then do a release
- ? make saver.ran_tests() create two events, file-edit, and then a colour
  release that
- ? turn on file-create/delete/rename/edit

------------------------------------------------------------------

- handle auto-revert on [test] page.
Have to think about how to handle auto-revert on the kata page 
(when [test] is pressed).
Do I go back to the previous traffic-light (even if there are inter-test-events)?
That would retain current behaviour from the edit page point of view.
What other options are there?

------------------------------------------------------------------

checkout is prevented if it undoes an auto-revert.
Suppose RAG -> RAG was 6->7->8 where 8 is same as 6
then you are prevented from checking out 7.
Suppose RAG -> RAG is now 6 -> ite(7,8,9) -> 10 -> 11 where 11 is same as 6.
Are you now prevented from checking out 7,8,9,10 ?
Or should this restriction be turned off completely?

------------------------------------------------------------------

- make (C)(D)(R)(E) icons visible when extra[x] is ticked
- add diff_summary tooltips for (C)(D)(R)(E) icons

------------------------------------------------------------------

Note: all web code is on a branch and so is not even on beta yet.
When it is deployed to beta/prod then inter-test-events will start to
be created, since saver has inter-test-events in beta/prod already.

------------------------------------------------------------------

stdout/stderr/status appear below the file knave when reviewing 
an inter-test-event index. They should not.

------------------------------------------------------------------

Upgrade demo to bring up a v2 kata with inter-test events.
Use it to get into review page for working on showing inter-test events.
Have to think about how to handle [revert]
Do I allow revert from an inter-test event? I think yes.
Will need (C)(D)(R)(E) icons with an underbar.

------------------------------------------------------------------

extra[x] checkbox is not very visible.
When you open a review page, should it be checked by default so
that inter-test-events are immediately visible?

------------------------------------------------------------------

diff tool-tips will need a little work. Will need to add a 'title'
eg created/red/amber/green will now also need 
file-created/file-deleted/file-renamed/file-edited

------------------------------------------------------------------

In a v2 kata, if you create inter-test-events, and traffic-lights are at
indexes 2,4,7 then these indexes are visible in the diff-tool-tip.
If you click light(eg index=4) then in review mode you see that light 
underbarred and the navigator-index shown is 4.
You can use [<][>] to navigate to a non-test-event and
- the diff is shown
- the index will update
- the underbar will be removed.
Perhaps this is almost enough?!
Could extra[x] only control what the underlying events are?

------------------------------------------------------------------

The extra[x] checkbox in review mode should go nearer to the 
<< < 8 > >> navigator.

------------------------------------------------------------------

In review-mode, always do diff-summary of index-1,index
and always show file-type markers. Make the diff[x] checkbox
control whether the [+][-] diffs are visible. Need to try this.
What about [+] created files and [-] deleted files?

Polyfill old checkouts on model?
